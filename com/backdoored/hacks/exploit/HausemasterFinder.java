package com.backdoored.hacks.exploit;

import com.backdoored.hacks.*;
import a.a.g.b.*;
import com.backdoored.gui.*;
import com.backdoored.setting.*;
import com.backdoored.event.*;
import net.minecraft.network.play.server.*;
import com.backdoored.utils.*;
import java.util.*;
import net.minecraftforge.fml.common.eventhandler.*;

@b.a(name = "Hausemaster Finder", description = ":flushed:", category = CategoriesInit.EXPLOIT)
public class HausemasterFinder extends BaseHack
{
    private Setting<Integer> maxPlayerPreviewElementCount;
    
    public HausemasterFinder() {
        super();
        this.maxPlayerPreviewElementCount = new IntegerSetting("Max PlayerPreviewElement Count", this, 200, 175, 225);
    }
    
    @SubscribeEvent
    public void a(final PacketRecieved packetRecieved) {
        if (packetRecieved.packet instanceof SPacketPlayerListItem && this.getEnabled()) {
            final SPacketPlayerListItem sPacketPlayerListItem = (SPacketPlayerListItem)packetRecieved.packet;
            if (sPacketPlayerListItem.getAction() == SPacketPlayerListItem.Action.ADD_PLAYER && HausemasterFinder.mc.getConnection() != null && HausemasterFinder.mc.getConnection().getPlayerInfoMap().size() >= this.maxPlayerPreviewElementCount.getValInt()) {
                final Iterator iterator = sPacketPlayerListItem.getEntries().iterator();
                while (iterator.hasNext()) {
                    Utils.printMessage("PlayerPreviewElement " + iterator.next().getDisplayName() + " is hausemaster?", "gold");
                }
            }
        }
    }
}

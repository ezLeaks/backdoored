package com.backdoored.hacks.exploit;

import com.backdoored.hacks.*;
import a.a.g.b.*;
import com.backdoored.gui.*;
import com.backdoored.setting.*;
import a.a.d.d.*;
import net.minecraft.network.play.client.*;
import java.time.*;
import java.time.temporal.*;
import net.minecraftforge.fml.common.eventhandler.*;

@b.a(name = "Ping Spoof", description = "Spoof your ping retard", category = CategoriesInit.EXPLOIT)
public class PingSpoof extends BaseHack
{
    private Setting<Integer> delay;
    private Instant pj;
    
    public PingSpoof() {
        super();
        this.delay = new IntegerSetting("Delay", this, 20, 1, 300);
        this.pj = Instant.now();
    }
    
    @SubscribeEvent
    public void a(final c c) {
        if (c.packet instanceof CPacketKeepAlive && this.getEnabled()) {
            if (Duration.between(this.pj, Instant.now()).getSeconds() >= this.delay.getValInt() / 10.0f) {
                this.pj = Instant.now();
                c.setCanceled(false);
            }
            else {
                c.setCanceled(true);
            }
        }
    }
}

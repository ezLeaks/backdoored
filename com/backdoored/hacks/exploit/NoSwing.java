package com.backdoored.hacks.exploit;

import com.backdoored.hacks.*;
import a.a.g.b.*;
import com.backdoored.gui.*;
import a.a.g.b.d.*;
import com.backdoored.setting.*;
import a.a.d.d.*;
import net.minecraftforge.fml.common.eventhandler.*;
import net.minecraftforge.client.event.*;
import com.backdoored.*;
import net.minecraft.network.play.client.*;
import net.minecraft.util.*;
import net.minecraft.network.*;
import net.minecraft.entity.player.*;
import net.minecraft.util.math.*;

@b.a(name = "NoSwing", description = "Prevents the swing animation for others", category = CategoriesInit.EXPLOIT)
public class NoSwing extends BaseHack
{
    private final Setting<i.a> mode;
    
    public NoSwing() {
        super();
        this.mode = new EnumSetting<i.a>("Mode", (BaseHack)this, (Enum)i.a.pf);
    }
    
    @SubscribeEvent
    public void a(final c c) {
        if (this.getEnabled() && this.mode.getValInt() == i.a.pf && c.packet instanceof CPacketAnimation) {
            c.setCanceled(true);
        }
    }
    
    @SubscribeEvent
    public void a(final MouseEvent mouseEvent) {
        if (!this.getEnabled() || this.mode.getValInt() != i.a.pg) {
            return;
        }
        if (mouseEvent.getButton() == 0 && NoSwing.mc.objectMouseOver.entityHit == null) {
            final BlockPos blockPos = NoSwing.mc.objectMouseOver.getBlockPos();
            Globals.a().sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, blockPos, EnumFacing.UP));
            Globals.a().sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, blockPos, EnumFacing.UP));
            mouseEvent.setCanceled(true);
        }
        if (mouseEvent.getButton() == 0 && NoSwing.mc.objectMouseOver.entityHit != null) {
            NoSwing.mc.playerController.attackEntity((EntityPlayer)NoSwing.mc.player, NoSwing.mc.objectMouseOver.entityHit);
            mouseEvent.setCanceled(true);
        }
    }
}

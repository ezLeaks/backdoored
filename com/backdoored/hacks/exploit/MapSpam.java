package com.backdoored.hacks.exploit;

import com.backdoored.hacks.*;
import a.a.g.b.*;
import com.backdoored.gui.*;
import java.time.*;
import com.backdoored.setting.*;
import net.minecraft.init.*;
import a.a.k.*;
import net.minecraft.item.*;
import com.backdoored.utils.*;
import net.minecraft.network.*;
import net.minecraft.util.*;
import net.minecraft.network.play.client.*;
import net.minecraft.inventory.*;
import net.minecraft.entity.player.*;

@b.a(name = "Map Spam", description = "Spams maps in order to cause a map reset", category = CategoriesInit.EXPLOIT)
public class MapSpam extends BaseHack
{
    private Setting<Double> pd;
    private Instant pe;
    
    public MapSpam() {
        super();
        this.pd = new DoubleSetting("Delay", this, 1.0, 0.1, 4.0);
        this.pe = Instant.EPOCH;
    }
    
    public void onTick() {
        if (this.getEnabled() && c.a(this.pe, Instant.now(), Math.round(this.pd.getValInt() * 1000.0))) {
            final int a = f.a((Item)Items.MAP);
            if (a == -1) {
                this.setEnabled(false);
                Utils.printMessage("No empty maps in your hotbar :(");
                return;
            }
            MapSpam.mc.player.connection.sendPacket((Packet)new CPacketHeldItemChange(a));
            MapSpam.mc.player.inventory.currentItem = a;
            MapSpam.mc.player.connection.sendPacket((Packet)new CPacketPlayerTryUseItem(EnumHand.MAIN_HAND));
            for (int i = 0; i <= 44; ++i) {
                if (MapSpam.mc.player.inventoryContainer.getSlot(i).getStack().getItem() == Items.FILLED_MAP) {
                    MapSpam.mc.playerController.windowClick(MapSpam.mc.player.openContainer.windowId, i, 0, ClickType.THROW, (EntityPlayer)MapSpam.mc.player);
                    MapSpam.mc.player.inventory.removeStackFromSlot(i);
                }
            }
        }
    }
}
